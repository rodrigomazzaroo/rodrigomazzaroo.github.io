<!-- ===================================================
     SCRIPT: BURBUJAS PREMIUM SECUENCIALES
=================================================== -->
<script>
window.onload = () => {

    // Evitar repetir si el usuario ya lo vio
    if (sessionStorage.getItem("tourDone")) return;

    // Botones
    const instagramBtn = document.querySelector('.buttons a:nth-child(1)');
    const whatsappBtn  = document.querySelector('.buttons a:nth-child(2)');
    const portfolioBtn = document.querySelector('.buttons a:nth-child(3)');

    // Obtener posición en pantalla
    const pos = el => {
        const r = el.getBoundingClientRect();
        return {
            top:  r.top  + window.scrollY,
            left: r.left + window.scrollX
        };
    };

    // Crear burbuja
    function createBubble(text, element) {
        return new Promise(resolve => {
            const b = document.createElement('div');
            b.className = 'bubble';
            b.innerHTML = text + '<div class="bubble-close">Entendido</div>';
            document.body.appendChild(b);

            const p = pos(element);

            // Ubicar la burbuja arriba del botón
            b.style.top  = (p.top - 90) + "px";
            b.style.left = (p.left - 20) + "px";

            // Cerrar manual
            b.querySelector(".bubble-close").onclick = () => {
                b.remove();
                resolve();
            };

            // Cerrar automático a los 6s
            setTimeout(() => {
                if (document.body.contains(b)) {
                    b.remove();
                    resolve();
                }
            }, 6000);
        });
    }

    // Secuencia ordenada
    async function startTour() {
        await createBubble("Seguime en Instagram para ver mis últimos trabajos", instagramBtn);
        await createBubble("Pedí tu turno directamente desde acá", whatsappBtn);
        await createBubble("Entrá a mi portfolio completo", portfolioBtn);
        sessionStorage.setItem("tourDone", "1");
    }

    setTimeout(startTour, 800); // Espera que cargue el preloader
};
</script>
